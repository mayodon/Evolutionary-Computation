# NSGA-II算法实现：SCH问题求解

本项目包含两个NSGA-II（Non-dominated Sorting Genetic Algorithm II）算法的实现，用于求解SCH（Schaffer）多目标优化问题。

## 📁 文件说明

### 1. `nsga2_sch.py` - 经典NumPy实现
- **实现方式**: 基于NumPy和面向对象编程
- **特点**: 代码结构清晰，易于理解和学习
- **适用场景**: 教学、小规模问题、算法原理学习

### 2. `nsga2_sch_tensor.py` - 张量化优化实现  
- **实现方式**: 基于PyTorch张量运算
- **特点**: 高度优化，支持GPU加速，运行效率高
- **适用场景**: 大规模问题、性能要求高的应用

## 🎯 问题描述

**SCH问题（Schaffer问题）**是一个经典的双目标优化测试问题：

- **目标函数1**: f₁(x) = x²
- **目标函数2**: f₂(x) = (x-2)²
- **决策变量**: x ∈ [-1000, 1000] (经典版本) 或 x ∈ [-2, 4] (张量版本)
- **理论Pareto前沿**: x ∈ [0, 2]

## 🔧 环境要求

### 基础环境
```bash
Python >= 3.7
numpy
matplotlib
```

### 张量版本额外要求
```bash
torch >= 1.8.0
```

### 安装依赖
```bash
# 基础版本
pip install numpy matplotlib

# 张量版本
pip install torch numpy matplotlib
```

## 🚀 运行方法

### 运行经典版本
```bash
python nsga2_sch.py
```

### 运行张量优化版本
```bash
python nsga2_sch_tensor.py
```

## 📊 输出结果

两个版本都会生成：
1. **控制台输出**: 显示算法运行进度和性能统计
2. **可视化图像**: Pareto前沿对比图（保存为PNG文件）
   - 蓝色散点：算法求解的解集
   - 红色曲线：理论Pareto前沿

## 🔍 算法原理

### NSGA-II核心组件

1. **非支配排序 (Fast Non-dominated Sort)**
   - 将种群按支配关系分层
   - 第一层为非支配解集（Pareto前沿）

2. **拥挤度距离 (Crowding Distance)**
   - 衡量解在目标空间中的密集程度
   - 保持解集的多样性

3. **锦标赛选择 (Tournament Selection)**
   - 基于排名和拥挤度距离选择父代
   - 优先选择排名靠前且拥挤度小的个体

4. **遗传操作**
   - **SBX交叉**: 模拟二进制交叉
   - **多项式变异**: 保持解的连续性

### 算法流程
```
1. 初始化种群
2. 评估目标函数
3. 非支配排序
4. 计算拥挤度距离
5. 选择、交叉、变异生成子代
6. 环境选择（精英保留）
7. 重复步骤3-6直到收敛
```

## 📈 性能对比

| 特性 | 经典版本 | 张量版本 |
|------|----------|----------|
| 实现复杂度 | 简单 | 中等 |
| 运行速度 | 较慢 | 快速 |
| 内存使用 | 较高 | 较低 |
| GPU支持 | 无 | 支持 |
| 可读性 | 高 | 中等 |

## 🎛️ 参数配置

### 经典版本参数
```python
pop_size = 100          # 种群大小
n_gen = 200            # 迭代代数
crossover_prob = 0.9   # 交叉概率
crossover_eta = 15     # 交叉分布指数
mutation_eta = 20      # 变异分布指数
```

### 张量版本参数
```python
pop_size = 100         # 种群大小
num_generations = 200  # 迭代代数
crossover_rate = 0.9   # 交叉率
mutation_rate = 0.1    # 变异率
x_min, x_max = -2.0, 4.0  # 搜索范围
```

## 🔬 技术特点

### 经典版本特点
- **面向对象设计**: Problem类、Individual类、NSGA2类
- **清晰的数据结构**: 每个个体包含完整的属性信息
- **易于扩展**: 可以轻松修改问题定义和算法参数
- **教学友好**: 代码逻辑清晰，适合学习算法原理

### 张量版本特点
- **向量化计算**: 利用PyTorch张量进行批量计算
- **GPU加速**: 自动检测并使用CUDA设备
- **内存优化**: 减少中间变量和循环操作
- **性能监控**: 内置运行时间统计功能

## 📝 代码结构

### nsga2_sch.py结构
```
├── Problem类 - 问题定义
├── Individual类 - 个体表示
├── NSGA2类 - 主算法
│   ├── 种群初始化
│   ├── 非支配排序
│   ├── 拥挤度计算
│   ├── 锦标赛选择
│   ├── SBX交叉
│   ├── 多项式变异
│   └── 主循环
└── 可视化模块
```

### nsga2_sch_tensor.py结构
```
├── 设备配置 (CPU/GPU)
├── 目标函数定义
├── 种群初始化 (智能分布)
├── 张量化非支配排序
├── 优化的拥挤度计算
├── 高效锦标赛选择
├── 向量化遗传操作
├── 主算法循环
└── 性能统计与可视化
```

## 🎓 学习建议

1. **初学者**: 建议从`nsga2_sch.py`开始，理解算法基本原理
2. **进阶用户**: 学习`nsga2_sch_tensor.py`的优化技巧
3. **实际应用**: 根据问题规模选择合适的版本

## 🤝 贡献

欢迎提交Issue和Pull Request来改进代码！
