# 蚁群优化算法（Ant Colony Optimization）实现

本文件夹包含一个改进的蚁群优化算法实现，专门用于求解连续函数优化问题。该算法结合了精英策略、多样性控制和自适应参数调整等现代优化技术。

## ACO.py - 改进蚁群优化算法

### 问题描述
求解复杂多峰函数的全局最大值：
```
f(x) = |x·sin(x)·cos(2x) - 2x·sin(3x) + 3x·sin(4x)|
```

该函数具有多个局部最优解，是测试全局优化算法性能的经典函数。

### 核心特性

#### 1. 精英档案策略
- **解决方案档案**：维护k个最优解的档案
- **精英保留**：确保优质解不会丢失
- **动态更新**：每次迭代更新档案内容

#### 2. 自适应搜索机制
- **动态搜索范围**：搜索强度参数q从初始值线性递减到最终值
- **停滞检测**：监控算法收敛状态，自动调整搜索策略
- **多样性控制**：根据种群多样性调整选择权重

#### 3. 多样化策略
- **随机重启**：一定概率完全随机生成新解
- **多样性权重**：低多样性时增加对低排名解的选择概率
- **全局引导**：偶尔参考全局最优解进行搜索

#### 4. 智能解生成
```python
# 基于档案的解生成
if diversity < 0.1:  # 多样性低
    weights = np.ones(k)  # 均匀选择
else:  # 正常情况
    weights = np.arange(k, 0, -1) ** (1 - diversity_weight * (1 - diversity))

# 正态分布生成新解
new_x = np.random.normal(mean, sigma)
```

### 算法流程

#### 主要步骤
1. **初始化**：
   - 随机生成蚂蚁位置
   - 建立精英解档案
   - 设置算法参数

2. **迭代优化**：
   - 更新搜索参数
   - 检测停滞状态
   - 生成新解决方案
   - 更新精英档案

3. **解生成策略**：
   - 随机重启（5%概率）
   - 基于档案的正态分布采样
   - 全局最优引导

4. **参数自适应**：
   - 搜索强度线性递减
   - 停滞时扩大搜索范围
   - 多样性驱动的权重调整

### 关键算法

#### 搜索强度更新
```python
# 线性递减策略
progress = iter_num / max_iter
q = q_init * (1 - progress) + q_final * progress

# 停滞处理
if stagnation_counter >= stagnation_limit:
    q = min(q * 3.0, 1.0)  # 临时扩大搜索范围
```

#### 多样性计算
```python
# 使用位置标准差作为多样性指标
positions = [ant[0] for ant in archive]
diversity = np.std(positions) / (bounds[1] - bounds[0])
```

#### 权重分配策略
```python
# 根据多样性调整选择权重
if diversity < 0.1:
    weights = np.ones(k)  # 均匀选择
else:
    weights = np.arange(k, 0, -1) ** (1 - diversity_weight * (1 - diversity))
```

### 参数说明

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `num_ants` | 50 | 蚂蚁数量，影响每次迭代的搜索点数 |
| `max_iter` | 100 | 最大迭代次数 |
| `k` | 10 | 精英档案大小，保留的优质解数量 |
| `q_init` | 0.5 | 初始搜索强度参数 |
| `q_final` | 0.01 | 最终搜索强度参数 |
| `xi` | 0.85 | 信息素挥发率（保留参数） |
| `stagnation_limit` | 20 | 停滞检测阈值 |
| `restart_prob` | 0.05 | 随机重启概率 |
| `diversity_weight` | 0.3 | 多样性权重因子 |

### 使用方法

#### 基本使用
```python
# 直接运行文件
python ACO.py

# 自定义参数
aco = ACO(
    num_ants=50,
    max_iter=100,
    bounds=(0, 50),
    k=10,
    visualize=True
)
best_x, best_value = aco.run()
```

#### 高级配置
```python
# 针对复杂问题的参数调优
aco = ACO(
    num_ants=100,           # 增加蚂蚁数量
    max_iter=200,           # 更多迭代次数
    k=20,                   # 更大的精英档案
    q_init=0.8,             # 更大的初始搜索范围
    stagnation_limit=30,    # 更高的停滞容忍度
    restart_prob=0.1,       # 更高的重启概率
    diversity_weight=0.5,   # 更强的多样性控制
    visualize=True
)
```

### 算法特点

#### 1. 连续空间适应
- 将离散的蚁群算法扩展到连续优化问题
- 使用正态分布生成新解
- 基于距离的信息素更新机制

#### 2. 平衡探索与开发
- 动态调整搜索强度
- 多样性驱动的选择策略
- 随机重启保持探索能力

#### 3. 鲁棒性强
- 停滞检测和处理机制
- 自适应参数调整
- 多重优化策略

#### 4. 可视化完善
- 实时显示蚂蚁分布
- 精英解和全局最优标记
- 收敛过程动画回放

### 与传统ACO的区别

| 特性 | 传统ACO | 改进ACO |
|------|---------|---------|
| 应用领域 | 离散优化 | 连续优化 |
| 信息素机制 | 路径信息素 | 解档案 |
| 解生成 | 概率选择 | 正态分布采样 |
| 多样性控制 | 无 | 主动多样性管理 |
| 参数调整 | 静态 | 自适应 |
| 停滞处理 | 无 | 智能检测和处理 |

